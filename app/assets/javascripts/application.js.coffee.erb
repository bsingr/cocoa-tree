#= depend_on_asset pods_sync_worker.js
#= require bluebird.js
#= require msgpack-js.js
#= require jquery.js
#= require bootstrap.js
#= require underscore.js
#= require backbone.js
#= require string.js
#= require_tree ./templates
#= require_tree ./shared
#= require_tree ./application

@logger = new Logger('app', 'info')
boot = (podsIndex) ->
  podsStore = new PodsStore()
  podsSyncWorker = new Worker('<%= asset_path('pods_sync_worker.js') %>')
  podsSyncWorkerClient = new PodsSyncWorkerClient(podsSyncWorker, podsIndex)
  appController = new AppController(podsSyncWorkerClient, podsStore)
  appController.loadPods()
  router = new AppRouter()
  router.appController = appController
  Backbone.history.start()
ready = ->
  new PodsIndex("/seeds").load(boot)
$(document).ready(ready)
$(document).on('page:load', ready)
