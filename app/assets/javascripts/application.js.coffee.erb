#= depend_on_asset pods_sync_worker.js
#= require bluebird.js
#= require msgpack-js.js
#= require jquery.js
#= require underscore.js
#= require backbone.js
#= require_tree ./templates
#= require_tree ./shared
#= require_tree ./application

@logger = new Logger('app', 'info')
boot = (index) ->
  podsStore = new PodsStore()
  podsSyncWorker = new Worker('<%= asset_path('pods_sync_worker.js') %>')
  podsSyncWorkerClient = new PodsSyncWorkerClient(podsSyncWorker, index)
  podsController = new PodsController(podsSyncWorkerClient, podsStore)
  podsController.loadPods()
  router = new AppRouter()
  router.podsController = podsController
  Backbone.history.start()
ready = ->
  new PodsIndex().load(boot)
$(document).ready(ready)
$(document).on('page:load', ready)
