//= depend_on_asset "pods_sync_worker.js"

@logger = new Logger('app')
boot = (index) ->
  podsStore = new PodsStore()
  podsSyncWorker = new Worker('<%= asset_path('pods_sync_worker.js') %>')
  podsSyncWorkerClient = new PodsSyncWorkerClient(podsSyncWorker, index)
  window.podsController = new PodsController(podsSyncWorkerClient, podsStore)
  window.podsController.loadPods()
  new AppRouter()
  Backbone.history.start()
ready = ->
  new PodsIndex().load(boot)
$(document).ready(ready)
$(document).on('page:load', ready)
