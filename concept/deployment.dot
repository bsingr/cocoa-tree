digraph deployment
{
  developer -> "github.com\n/cocoa-tree/cocoa-tree.git" [label="push"]
  "github.com\n/cocoa-tree/cocoa-tree.git" -> rails [label="deploy"]
  
  subgraph cluster_0 {
    "spec.job" -> "dependency.job" -> "github.job"
  }

  subgraph cluster_1 {
    "jobs.worker" -> "site.worker" -> "deploy.worker"
  }

  subgraph cluster_2 {
    "reset.site" -> "build.site" -> "download.site"
  }

  subgraph cluster_3 {
    rails -> scheduler [arrowhead=none,arrowtail=none]
    rails -> "cocoa-tree.example.com" [arrowhead=none,arrowtail=none]
  }

  scheduler -> "jobs.worker"

  "jobs.worker" -> "spec.job"
  "github.job" -> "jobs.worker"
  "github.com\n/CocoaPods/Specs.git" -> "spec.job"
  "api.github.com" -> "github.job"

  "site.worker" -> "reset.site"
  "download.site" -> "site.worker"

  "cocoa-tree.example.com" -> "reset.site"
  "cocoa-tree.example.com" -> "build.site"
  "cocoa-tree.example.com" -> "download.site"

  "deploy.worker" -> "github.com\n/cocoa-tree/cocoa-tree.github.io.git" [label="push"]

  "github.com\n/cocoa-tree/cocoa-tree.github.io.git" -> "cocoa-tree.github.io" [label="publish"]
}
